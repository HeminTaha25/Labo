{% extends "base.html" %}

{% block title %}Test Results - {{ lab_info.name }}{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="hero-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="hero-title">Test Results</h1>
                <p class="hero-subtitle">Secure access to your laboratory results</p>
                <p class="lead">Access your test results online 24/7 through our secure patient portal.</p>
            </div>
        </div>
    </div>
</section>

<!-- Results Access -->
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body p-4">
                        <h4 class="text-primary mb-4 text-center">Access Your Results</h4>
                        
                        <form id="resultsForm">
                            <div class="mb-3">
                                <label for="patient_id" class="form-label">Patient ID or Date of Birth *</label>
                                <input type="text" class="form-control" id="patient_id" name="patient_id" required 
                                       placeholder="Enter your Patient ID or DOB (MM/DD/YYYY)">
                            </div>
                            
                            <div class="mb-3">
                                <label for="last_name" class="form-label">Last Name *</label>
                                <input type="text" class="form-control" id="last_name" name="last_name" required 
                                       placeholder="Enter your last name">
                            </div>
                            
                            <div class="mb-3">
                                <label for="access_code" class="form-label">Access Code *</label>
                                <input type="password" class="form-control" id="access_code" name="access_code" required 
                                       placeholder="Enter the access code provided with your results">
                                <small class="text-muted">This code was provided when your samples were collected or via email/phone.</small>
                            </div>
                            
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-sign-in-alt me-2"></i>Access Results
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <p class="text-muted">
                        <i class="fas fa-shield-alt me-2"></i>
                        Your information is protected by industry-standard security measures
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Information Cards -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">About Your Results</h2>
            <p class="section-subtitle">Important information about accessing and understanding your test results</p>
        </div>
        
        <div class="row">
            <div class="col-lg-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-center p-4">
                        <i class="fas fa-clock text-primary fa-3x mb-3"></i>
                        <h5>When Results Are Available</h5>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Routine blood work: 24-48 hours</li>
                            <li><i class="fas fa-check text-success me-2"></i>Cultures: 48-72 hours</li>
                            <li><i class="fas fa-check text-success me-2"></i>Molecular tests: 24-72 hours</li>
                            <li><i class="fas fa-check text-success me-2"></i>Pathology: 3-5 days</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-center p-4">
                        <i class="fas fa-bell text-primary fa-3x mb-3"></i>
                        <h5>Result Notifications</h5>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Email notification when ready</li>
                            <li><i class="fas fa-check text-success me-2"></i>SMS alerts (if opted in)</li>
                            <li><i class="fas fa-check text-success me-2"></i>Phone call for critical values</li>
                            <li><i class="fas fa-check text-success me-2"></i>Physician receives copy</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-center p-4">
                        <i class="fas fa-download text-primary fa-3x mb-3"></i>
                        <h5>Result Features</h5>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Download PDF reports</li>
                            <li><i class="fas fa-check text-success me-2"></i>Print results</li>
                            <li><i class="fas fa-check text-success me-2"></i>Historical result tracking</li>
                            <li><i class="fas fa-check text-success me-2"></i>Reference ranges included</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Help Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h3 class="text-center mb-4">Need Help Accessing Your Results?</h3>
                
                <div class="accordion" id="helpAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                                I don't have my access code
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#helpAccordion">
                            <div class="accordion-body">
                                <p>Your access code is provided in several ways:</p>
                                <ul>
                                    <li>Printed on your receipt when samples were collected</li>
                                    <li>Sent via email if you provided an email address</li>
                                    <li>Given over the phone when results are ready</li>
                                </ul>
                                <p>If you can't locate your access code, please call us at {{ lab_info.phone }} with your full name and date of birth, and we'll help you access your results.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                I'm having trouble understanding my results
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                            <div class="accordion-body">
                                <p>Laboratory results can be complex. Here are some resources to help:</p>
                                <ul>
                                    <li>Each result includes reference ranges for normal values</li>
                                    <li>Abnormal results are clearly marked</li>
                                    <li>Contact your ordering physician for interpretation</li>
                                    <li>Our laboratory staff can explain technical aspects</li>
                                </ul>
                                <p><strong>Important:</strong> Always consult with your healthcare provider for medical interpretation of your results.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                                My results aren't available yet
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                            <div class="accordion-body">
                                <p>Different tests have different turnaround times:</p>
                                <ul>
                                    <li><strong>Routine chemistry:</strong> Usually available within 24 hours</li>
                                    <li><strong>Hematology:</strong> Typically 2-4 hours</li>
                                    <li><strong>Microbiology cultures:</strong> 48-72 hours (may take longer for final identification)</li>
                                    <li><strong>Molecular/PCR tests:</strong> 24-72 hours</li>
                                    <li><strong>Pathology:</strong> 3-5 business days</li>
                                </ul>
                                <p>If your results are taking longer than expected, please call us for an update.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour">
                                Technical issues with the portal
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                            <div class="accordion-body">
                                <p>If you're experiencing technical difficulties:</p>
                                <ul>
                                    <li>Try refreshing your browser</li>
                                    <li>Clear your browser cache and cookies</li>
                                    <li>Try a different browser or device</li>
                                    <li>Ensure JavaScript is enabled</li>
                                    <li>Check that you're entering information exactly as provided</li>
                                </ul>
                                <p>If problems persist, please call our technical support at {{ lab_info.phone }}.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Support -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h3 class="mb-3">Still Need Help?</h3>
                <p class="mb-4">Our patient services team is here to help you access and understand your results.</p>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <a href="tel:{{ lab_info.phone }}" class="btn btn-primary btn-lg w-100">
                            <i class="fas fa-phone me-2"></i>Call {{ lab_info.phone }}
                        </a>
                    </div>
                    <div class="col-md-6 mb-3">
                        <a href="mailto:{{ lab_info.email }}" class="btn btn-outline-primary btn-lg w-100">
                            <i class="fas fa-envelope me-2"></i>Email Support
                        </a>
                    </div>
                </div>
                
                <p class="text-muted mt-3">
                    <i class="fas fa-clock me-2"></i>
                    Support available during business hours: {{ lab_info.hours.weekdays }}
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Demo Notice -->
<div id="demoNotice" class="alert alert-info alert-dismissible fade show position-fixed" style="top: 100px; right: 20px; z-index: 1000; max-width: 300px; display: none;">
    <strong>Demo Mode:</strong> This is a demonstration. In a real implementation, this would connect to a secure patient portal system.
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.getElementById('resultsForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Show demo notice
    document.getElementById('demoNotice').style.display = 'block';
    
    // In a real implementation, this would authenticate and redirect to results
    setTimeout(function() {
        alert('Demo: In a real system, you would now be redirected to your secure results page.');
    }, 1000);
});
</script>
{% endblock %}